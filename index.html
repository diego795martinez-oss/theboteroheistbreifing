<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Botero Heist Dashboard</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- React and ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- Babel to translate JSX in the browser -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <style>
        /* Custom scrollbar for "notebook" feel */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #0f172a; 
        }
        ::-webkit-scrollbar-thumb {
            background: #334155; 
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #475569; 
        }

        /* SECURITY: Prevent text selection on everything except inputs */
        body {
            -webkit-user-select: none; /* Safari */
            -ms-user-select: none; /* IE 10 and IE 11 */
            user-select: none; /* Standard syntax */
        }
        
        /* Allow typing in inputs */
        input, textarea {
            -webkit-user-select: text;
            -ms-user-select: text;
            user-select: text;
        }
    </style>
</head>
<body class="bg-slate-900 text-slate-100">
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect } = React;

        // --- ICONS (SVG Definitions for standalone usage) ---
        const Icons = {
            Search: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="11" cy="11" r="8"/><path d="m21 21-4.3-4.3"/></svg>,
            FileText: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z"/><polyline points="14 2 14 8 20 8"/><line x1="16" x2="8" y1="13" y2="13"/><line x1="16" x2="8" y1="17" y2="17"/><polyline points="10 9 9 9 8 9"/></svg>,
            Clock: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>,
            Mail: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="20" height="16" x="2" y="4" rx="2"/><path d="m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7"/></svg>,
            PenTool: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m12 19 7-7 3 3-7 7-3-3z"/><path d="m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z"/><path d="m2 2 7.586 7.586"/><circle cx="11" cy="11" r="2"/></svg>,
            Bot: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>,
            CheckSquare: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m9 11 3 3L22 4"/><path d="M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11"/></svg>,
            Shield: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10"/></svg>,
            User: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>,
            Fingerprint: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M2 12C2 6.5 6.5 2 12 2a10 10 0 0 1 8 6"/><path d="M5 15.1A7 7 0 0 1 9.9 8.2"/><path d="M12 4v4"/><path d="M22 12c0 1.2-.2 2.3-.5 3.3"/><path d="M18.8 9.3a4.7 4.7 0 0 1 0 5.4"/><path d="M15.2 7.7a2.2 2.2 0 0 1 0 3.6"/><path d="M12 20a10 10 0 0 1-6-16"/><path d="M20 20a10 10 0 0 1-6-6"/><path d="M8 12a4 4 0 0 1 8 0"/></svg>,
            ChevronRight: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m9 18 6-6-6-6"/></svg>,
            Save: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"/><polyline points="17 21 17 13 7 13 7 21"/><polyline points="7 3 7 8 15 8"/></svg>,
            Copy: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect width="14" height="14" x="8" y="8" rx="2" ry="2"/><path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2"/></svg>,
            Check: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M20 6 9 17l-5-5"/></svg>,
            Lock: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>,
            Unlock: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 9.9-1"></path></svg>,
            AlertTriangle: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"></path><line x1="12" y1="9" x2="12" y2="13"></line><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>,
            Download: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" x2="12" y1="15" y2="3"/></svg>,
            Trash: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="3 6 5 6 21 6"/><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>,
            RefreshCw: (props) => <svg {...props} xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"/><path d="M21 3v5h-5"/><path d="M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"/><path d="M8 16H3v5"/></svg>,
        };

        const BoteroHeistBriefing = () => {
          const { 
            Search, FileText, Clock, Mail, PenTool, Bot, 
            CheckSquare, Shield, User, Fingerprint, ChevronRight, 
            Save, Copy, Check, Lock, Unlock, AlertTriangle, Download, Trash, RefreshCw
          } = Icons;

          // --- SECURITY MEASURES ---
          useEffect(() => {
            const handleContextMenu = (e) => {
                e.preventDefault();
                return false;
            };
            
            const handleCopy = (e) => {
                e.preventDefault();
                return false;
            };

            const handleCut = (e) => {
                e.preventDefault();
                return false;
            };

            const handlePaste = (e) => {
                e.preventDefault();
                return false;
            };

            // Attach listeners to the document
            document.addEventListener('contextmenu', handleContextMenu);
            document.addEventListener('copy', handleCopy);
            document.addEventListener('cut', handleCut);
            document.addEventListener('paste', handlePaste);

            // Cleanup function
            return () => {
                document.removeEventListener('contextmenu', handleContextMenu);
                document.removeEventListener('copy', handleCopy);
                document.removeEventListener('cut', handleCut);
                document.removeEventListener('paste', handlePaste);
            };
          }, []);


          const [activePhase, setActivePhase] = useState(1);
          const [detectiveName, setDetectiveName] = useState('');
          const [checklist, setChecklist] = useState({
            formulas: false,
            timeDiff: false,
            emailID: false,
            ready: false
          });
          
          const [notes, setNotes] = useState({
            timeResearch: '', 
            p3_q1: '',
            p3_q2: '',
            transcribedEvidence: '',
            report1: '',
            report2: '',
            report3: '',
            aiQuestion: '',
            verifiedEvidence: ''
          });

          // Phase 1 Logic
          const [formulaAttempts, setFormulaAttempts] = useState({ pps: '', ppc: '' });
          const [formulaStatus, setFormulaStatus] = useState({ 
            pps: 'locked', // locked, error, unlocked
            ppc: 'locked' 
          });

          // Phase 2 Logic
          const [phase2Data, setPhase2Data] = useState({
            forDef: '',
            forEx: '',
            sinceDef: '',
            sinceEx: ''
          });
          const [phase2Status, setPhase2Status] = useState({
            for: 'locked',
            since: 'locked'
          });

          const [copied, setCopied] = useState(false);

          // --- AUTOSAVE LOGIC ---
          // 1. Load data on mount
          useEffect(() => {
            const savedData = localStorage.getItem('boteroHeistData');
            if (savedData) {
              try {
                const parsed = JSON.parse(savedData);
                if (parsed.activePhase) setActivePhase(parsed.activePhase);
                if (parsed.detectiveName) setDetectiveName(parsed.detectiveName);
                if (parsed.checklist) setChecklist(parsed.checklist);
                if (parsed.notes) setNotes(parsed.notes);
                if (parsed.formulaStatus) setFormulaStatus(parsed.formulaStatus);
                if (parsed.phase2Data) setPhase2Data(parsed.phase2Data);
                if (parsed.phase2Status) setPhase2Status(parsed.phase2Status);
              } catch (e) {
                console.error("Failed to load save data", e);
              }
            }
          }, []);

          // 2. Save data on change
          useEffect(() => {
            const dataToSave = {
              activePhase,
              detectiveName,
              checklist,
              notes,
              formulaStatus,
              phase2Data,
              phase2Status
            };
            localStorage.setItem('boteroHeistData', JSON.stringify(dataToSave));
          }, [activePhase, detectiveName, checklist, notes, formulaStatus, phase2Data, phase2Status]);


          const validatePPS = () => {
            const input = formulaAttempts.pps.toLowerCase();
            if ((input.includes('have') || input.includes('has')) && (input.includes('past participle') || input.includes('v3'))) {
                setFormulaStatus(prev => ({ ...prev, pps: 'unlocked' }));
            } else {
                setFormulaStatus(prev => ({ ...prev, pps: 'error' }));
            }
          };

          const validatePPC = () => {
            const input = formulaAttempts.ppc.toLowerCase();
            if ((input.includes('have') || input.includes('has')) && input.includes('been') && input.includes('ing')) {
                setFormulaStatus(prev => ({ ...prev, ppc: 'unlocked' }));
            } else {
                setFormulaStatus(prev => ({ ...prev, ppc: 'error' }));
            }
          };


          const validatePhase2 = (type) => {
            const def = phase2Data[`${type}Def`].toLowerCase();
            const ex = phase2Data[`${type}Ex`].toLowerCase();
            
            let validDef = false;
            let validEx = false;

            if (type === 'for') {
                if (def.includes('period') || def.includes('duration') || def.includes('length') || def.includes('time') || def.includes('how long')) validDef = true;
                if (ex.includes('for')) validEx = true;
            } else {
                if (def.includes('point') || def.includes('specific') || def.includes('start') || def.includes('begin') || def.includes('when')) validDef = true;
                if (ex.includes('since')) validEx = true;
            }

            if (validDef && validEx) {
                setPhase2Status(prev => ({...prev, [type]: 'unlocked'}));
            } else {
                setPhase2Status(prev => ({...prev, [type]: 'error'}));
            }
          };


          const toggleChecklist = (key) => {
            setChecklist(prev => ({ ...prev, [key]: !prev[key] }));
          };

          const handleNoteChange = (e) => {
            const { name, value } = e.target;
            setNotes(prev => ({ ...prev, [name]: value }));
          };

          // Allow copying specifically for the AI prompt via button only
          const copyToClipboard = (text) => {
            // Temporarily enable copy for this action
            const tempEnableCopy = (e) => e.stopImmediatePropagation();
            document.addEventListener('copy', tempEnableCopy, true);

            const textArea = document.createElement("textarea");
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            try {
              document.execCommand('copy');
              setCopied(true);
              setTimeout(() => setCopied(false), 2000);
            } catch (err) {
              console.error('Fallback: Oops, unable to copy', err);
            }
            document.body.removeChild(textArea);
            
            // Remove temp listener
            document.removeEventListener('copy', tempEnableCopy, true);
          };

          const handleDownload = () => {
            const content = `<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CONFIDENTIAL CASE FILE: ${detectiveName}</title>
<style>
  body { background-color: #0f172a; color: #e2e8f0; font-family: 'Courier New', Courier, monospace; padding: 40px; max-width: 800px; margin: 0 auto; line-height: 1.6; }
  h1 { color: #fbbf24; border-bottom: 3px solid #fbbf24; padding-bottom: 10px; text-transform: uppercase; letter-spacing: 2px; }
  h2 { color: #94a3b8; margin-top: 30px; border-bottom: 1px solid #334155; padding-bottom: 5px; font-size: 1.2em; }
  .box { background: #1e293b; padding: 20px; border-radius: 8px; border: 1px solid #334155; margin-bottom: 20px; }
  .label { color: #64748b; font-size: 0.8em; text-transform: uppercase; display: block; margin-bottom: 5px; font-weight: bold; }
  .value { color: #f8fafc; margin-bottom: 15px; display: block; white-space: pre-wrap; }
  .stamp { border: 2px solid #ef4444; color: #ef4444; display: inline-block; padding: 5px 10px; text-transform: uppercase; font-weight: bold; transform: rotate(-5deg); margin-bottom: 20px; }
</style>
</head>
<body>
  <h1>Confidential Case File</h1>
  <div class="stamp">Top Secret // Eyes Only</div>
  
  <div class="box">
    <span class="label">Operation</span>
    <span class="value">THE BOTERO HEIST</span>
    <span class="label">Detective Agent</span>
    <span class="value">${detectiveName || "Unknown Agent"}</span>
    <span class="label">Date Filed</span>
    <span class="value">${new Date().toLocaleDateString()} ${new Date().toLocaleTimeString()}</span>
  </div>

  <h2>PHASE 1: GRAMMAR CODES</h2>
  <div class="box">
    <span class="label">PPS Code Status</span>
    <span class="value">${formulaStatus.pps === 'unlocked' ? 'UNLOCKED' : 'LOCKED'}</span>
    <span class="label">PPC Code Status</span>
    <span class="value">${formulaStatus.ppc === 'unlocked' ? 'UNLOCKED' : 'LOCKED'}</span>
    <span class="label">Research: Finished vs Unfinished Time</span>
    <span class="value">${notes.timeResearch || "N/A"}</span>
  </div>

  <h2>PHASE 2: SURVEILLANCE DATA</h2>
  <div class="box">
    <span class="label">Marker: FOR</span>
    <span class="value">Definition: ${phase2Data.forDef || "N/A"}\nExample: ${phase2Data.forEx || "N/A"}</span>
    <span class="label">Marker: SINCE</span>
    <span class="value">Definition: ${phase2Data.sinceDef || "N/A"}\nExample: ${phase2Data.sinceEx || "N/A"}</span>
  </div>

  <h2>PHASE 3: INTERCEPTED INTEL</h2>
  <div class="box">
    <span class="label">Evidence Transcription Log</span>
    <span class="value">${notes.transcribedEvidence || "N/A"}</span>
    <span class="label">Analysis 1 (PPC Logic)</span>
    <span class="value">${notes.p3_q1 || "N/A"}</span>
    <span class="label">Analysis 2 (PPS Logic)</span>
    <span class="value">${notes.p3_q2 || "N/A"}</span>
  </div>

  <h2>PHASE 4: INTELLIGENCE REPORTS</h2>
  <div class="box">
    <span class="label">Report #1 (PPS)</span>
    <span class="value">${notes.report1 || "N/A"}</span>
    <span class="label">Report #2 (PPC)</span>
    <span class="value">${notes.report2 || "N/A"}</span>
    <span class="label">Report #3 (Markers)</span>
    <span class="value">${notes.report3 || "N/A"}</span>
  </div>

  <h2>PHASE 5: AI CONSULTANT</h2>
  <div class="box">
    <span class="label">Question from Forensic Consultant</span>
    <span class="value">${notes.aiQuestion || "N/A"}</span>
    <span class="label">Final Verified Evidence</span>
    <span class="value">${notes.verifiedEvidence || "N/A"}</span>
  </div>
</body>
</html>`;
            
            const blob = new Blob([content], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `Botero_Heist_Evidence_${detectiveName.replace(/\s+/g, '_') || 'Log'}.html`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
          };

          const handleReset = () => {
            if (confirm("WARNING: This will permanently delete your case file and reset the mission. Are you sure?")) {
                localStorage.removeItem('boteroHeistData');
                window.location.reload();
            }
          };

          const aiPrompt = "I am preparing for the Botero Heist escape room. I have written 3 evidence sentences in my notebook using Present Perfect Simple and Continuous. I want you to be my Forensic Consultant. Do not just give me the answers. Ask me Socratic questions to help me check if I used the formulas correctly, if I used 'for/since' right, and if I chose the best tense for the situation. Here is my first sentence: [Paste/transcribe your sentence here]";

          return (
            <div className="min-h-screen bg-slate-900 text-slate-100 font-sans selection:bg-amber-500 selection:text-slate-900">
              
              {/* HEADER */}
              <header className="bg-slate-800 border-b border-amber-500/50 sticky top-0 z-50 shadow-lg">
                <div className="max-w-5xl mx-auto px-4 py-3 flex flex-col md:flex-row justify-between items-center gap-4">
                  <div className="flex items-center gap-3">
                    <Shield className="w-8 h-8 text-amber-400" />
                    <div>
                      <h1 className="text-xl font-bold tracking-wider text-amber-400 uppercase">Operation: Botero Heist</h1>
                      <p className="text-xs text-slate-400 tracking-widest">INTELLIGENCE GATHERING BRIEFING // GRADE 6</p>
                    </div>
                  </div>
                  
                  <div className="flex items-center gap-3 bg-slate-900 px-4 py-2 rounded border border-slate-700 w-full md:w-auto">
                    <User className="w-4 h-4 text-slate-400" />
                    <span className="text-xs text-slate-500 whitespace-nowrap">DETECTIVE ID:</span>
                    <input 
                      type="text" 
                      placeholder="Enter Name..." 
                      value={detectiveName}
                      onChange={(e) => setDetectiveName(e.target.value)}
                      className="bg-transparent border-none focus:ring-0 text-amber-400 font-mono w-full md:w-48 placeholder-slate-600"
                    />
                  </div>
                </div>
              </header>

              <main className="max-w-5xl mx-auto px-4 py-8 grid grid-cols-1 lg:grid-cols-4 gap-8">
                
                {/* NAVIGATION SIDEBAR */}
                <nav className="lg:col-span-1 space-y-2">
                  {[
                    { id: 1, title: 'Phase 1: Grammar Codes', icon: Search },
                    { id: 2, title: 'Phase 2: Surveillance', icon: Clock },
                    { id: 3, title: 'Phase 3: Intercepted Intel', icon: Mail },
                    { id: 4, title: 'Phase 4: Writing Reports', icon: PenTool },
                    { id: 5, title: 'Phase 5: AI Consultant', icon: Bot },
                  ].map((phase) => (
                    <button
                      key={phase.id}
                      onClick={() => setActivePhase(phase.id)}
                      className={`w-full text-left px-4 py-3 rounded flex items-center gap-3 transition-all duration-200 border-l-4 ${
                        activePhase === phase.id 
                          ? 'bg-amber-500/10 border-amber-500 text-amber-400' 
                          : 'bg-slate-800 border-transparent text-slate-400 hover:bg-slate-700 hover:text-slate-200'
                      }`}
                    >
                      <phase.icon className="w-5 h-5" />
                      <span className="font-medium text-sm">{phase.title}</span>
                    </button>
                  ))}
                  
                  <div className="mt-8 space-y-4">
                    <div className="bg-slate-800 p-4 rounded border border-slate-700">
                        <h3 className="text-amber-400 font-bold flex items-center gap-2 mb-3 text-sm">
                        <CheckSquare className="w-4 h-4" /> CASE FILE CHECKLIST
                        </h3>
                        <div className="space-y-2">
                        {[
                            { key: 'formulas', label: 'Formulas Recorded' },
                            { key: 'timeDiff', label: 'Defined Finished/Unfinished' },
                            { key: 'emailID', label: 'Email Analysis Complete' },
                            { key: 'ready', label: 'Ready for Escape Room' }
                        ].map((item) => (
                            <label key={item.key} className="flex items-center gap-2 cursor-pointer group">
                            <div 
                                onClick={() => toggleChecklist(item.key)}
                                className={`w-5 h-5 rounded border flex items-center justify-center transition-colors ${
                                checklist[item.key] ? 'bg-green-500 border-green-500 text-slate-900' : 'border-slate-600 group-hover:border-amber-400'
                                }`}
                            >
                                {checklist[item.key] && <Check className="w-3 h-3" />}
                            </div>
                            <span className={`text-sm ${checklist[item.key] ? 'text-green-400 line-through decoration-green-500/50' : 'text-slate-400'}`}>
                                {item.label}
                            </span>
                            </label>
                        ))}
                        </div>
                    </div>

                    <div className="pt-4 border-t border-slate-700 space-y-3">
                        <button 
                            onClick={handleDownload}
                            className="w-full bg-blue-700 hover:bg-blue-600 text-white p-3 rounded flex items-center justify-center gap-2 font-bold shadow-lg transition-all hover:scale-105"
                        >
                            <Download className="w-5 h-5" /> Download Case File
                        </button>
                        
                        <button 
                            onClick={handleReset}
                            className="w-full bg-slate-800 hover:bg-red-900/30 hover:text-red-400 text-slate-500 p-2 rounded flex items-center justify-center gap-2 text-xs font-medium transition-colors border border-transparent hover:border-red-900/50"
                        >
                            <Trash className="w-3 h-3" /> Reset Mission Progress
                        </button>

                        <div className="text-center">
                            <span className="text-[10px] uppercase tracking-widest text-green-500 flex items-center justify-center gap-1 opacity-70">
                                <RefreshCw className="w-3 h-3 animate-spin-slow" /> Autosave Active
                            </span>
                        </div>
                    </div>
                  </div>
                </nav>

                {/* CONTENT AREA */}
                <div className="lg:col-span-3">
                  <div className="bg-slate-800 rounded-lg shadow-xl border border-slate-700 overflow-hidden min-h-[600px] flex flex-col">
                    
                    {/* Phase 1: Grammar */}
                    {activePhase === 1 && (
                      <div className="p-6 md:p-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                        <h2 className="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                          <Fingerprint className="text-amber-500" />
                          Phase 1: The Secret Codes
                        </h2>
                        
                        <div className="space-y-6">
                          {/* PPS SECTION */}
                          <div className={`p-6 rounded-lg border-l-4 transition-all duration-500 ${formulaStatus.pps === 'unlocked' ? 'bg-green-900/20 border-green-500' : 'bg-slate-900/50 border-blue-500'}`}>
                            <div className="flex justify-between items-start mb-4">
                                <h3 className="text-blue-400 font-bold text-lg">Present Perfect Simple (PPS)</h3>
                                {formulaStatus.pps === 'unlocked' ? <Unlock className="text-green-500 w-5 h-5"/> : <Lock className="text-slate-500 w-5 h-5"/>}
                            </div>
                            
                            {formulaStatus.pps === 'unlocked' ? (
                                <div>
                                    <div className="font-mono bg-green-900/30 p-3 rounded text-green-300 border border-green-500/30">
                                        [Subject] + [Have/Has] + [Past Participle]
                                    </div>
                                    <p className="text-sm text-green-400 mt-2 flex items-center gap-2"><Check className="w-4 h-4"/> Access Granted: Formula Verified.</p>
                                </div>
                            ) : (
                                <div>
                                    <p className="text-sm text-slate-400 mb-3">Formula Classified. Enter the components to decrypt (e.g., Subject + Have...).</p>
                                    <div className="flex gap-2">
                                        <input 
                                            type="text" 
                                            placeholder="Enter formula components..." 
                                            value={formulaAttempts.pps}
                                            onChange={(e) => setFormulaAttempts(prev => ({...prev, pps: e.target.value}))}
                                            className="bg-slate-900 border border-slate-700 text-white text-sm rounded px-3 py-2 w-full focus:border-blue-500 focus:outline-none"
                                        />
                                        <button 
                                            onClick={validatePPS}
                                            className="bg-blue-600 hover:bg-blue-500 text-white px-4 py-2 rounded text-sm font-bold transition-colors"
                                        >
                                            DECRYPT
                                        </button>
                                    </div>
                                    {formulaStatus.pps === 'error' && (
                                        <p className="text-red-400 text-xs mt-2 flex items-center gap-1 animate-pulse">
                                            <AlertTriangle className="w-3 h-3"/> Access Denied. Hint: Need 'Have/Has' and 'Past Participle'.
                                        </p>
                                    )}
                                </div>
                            )}
                            <p className="text-sm text-slate-500 mt-4 pt-4 border-t border-slate-700/50">Focus: Result of the action.</p>
                          </div>

                          {/* PPC SECTION */}
                          <div className={`p-6 rounded-lg border-l-4 transition-all duration-500 ${formulaStatus.ppc === 'unlocked' ? 'bg-green-900/20 border-green-500' : 'bg-slate-900/50 border-purple-500'}`}>
                            <div className="flex justify-between items-start mb-4">
                                <h3 className="text-purple-400 font-bold text-lg">Present Perfect Continuous (PPC)</h3>
                                {formulaStatus.ppc === 'unlocked' ? <Unlock className="text-green-500 w-5 h-5"/> : <Lock className="text-slate-500 w-5 h-5"/>}
                            </div>
                            
                            {formulaStatus.ppc === 'unlocked' ? (
                                <div>
                                    <div className="font-mono bg-green-900/30 p-3 rounded text-green-300 border border-green-500/30">
                                        [Subject] + [Have/Has] + [Been] + [Verb-ING]
                                    </div>
                                    <p className="text-sm text-green-400 mt-2 flex items-center gap-2"><Check className="w-4 h-4"/> Access Granted: Formula Verified.</p>
                                </div>
                            ) : (
                                <div>
                                    <p className="text-sm text-slate-400 mb-3">Formula Classified. Enter the components to decrypt.</p>
                                    <div className="flex gap-2">
                                        <input 
                                            type="text" 
                                            placeholder="Enter formula components..." 
                                            value={formulaAttempts.ppc}
                                            onChange={(e) => setFormulaAttempts(prev => ({...prev, ppc: e.target.value}))}
                                            className="bg-slate-900 border border-slate-700 text-white text-sm rounded px-3 py-2 w-full focus:border-purple-500 focus:outline-none"
                                        />
                                        <button 
                                            onClick={validatePPC}
                                            className="bg-purple-600 hover:bg-purple-500 text-white px-4 py-2 rounded text-sm font-bold transition-colors"
                                        >
                                            DECRYPT
                                        </button>
                                    </div>
                                    {formulaStatus.ppc === 'error' && (
                                        <p className="text-red-400 text-xs mt-2 flex items-center gap-1 animate-pulse">
                                            <AlertTriangle className="w-3 h-3"/> Access Denied. Hint: Need 'Have/Has', 'Been', and 'ING'.
                                        </p>
                                    )}
                                </div>
                            )}
                            <p className="text-sm text-slate-500 mt-4 pt-4 border-t border-slate-700/50">Focus: Duration of the action.</p>
                          </div>

                          <div className="mt-8">
                            <h3 className="text-white font-bold mb-4">The Time Difference Timeline</h3>
                            <div className="relative h-24 bg-slate-900 rounded-lg flex items-center px-8 border border-slate-700">
                              <div className="absolute top-1/2 left-8 right-8 h-1 bg-slate-600 transform -translate-y-1/2"></div>
                              
                              <div className="relative z-10 flex flex-col items-center">
                                <div className="w-4 h-4 bg-slate-500 rounded-full mb-2"></div>
                                <span className="text-xs text-slate-500">PAST</span>
                              </div>
                              
                              <div className="relative z-10 flex flex-col items-center ml-auto">
                                <div className="w-4 h-4 bg-amber-500 rounded-full mb-2 shadow-[0_0_10px_rgba(245,158,11,0.5)]"></div>
                                <span className="text-xs text-amber-500 font-bold">PRESENT</span>
                              </div>
                              
                              <div className="absolute top-1/2 left-1/4 w-1/2 h-8 -mt-8 border-t-2 border-dashed border-amber-500/50 rounded-t-full flex justify-center">
                                <span className="bg-slate-900 px-2 text-xs text-amber-400 -mt-3">Connection</span>
                              </div>
                            </div>
                            
                            {/* NEW INPUT SECTION for Time Difference */}
                            <div className="mt-4">
                                <label className="block text-sm text-amber-400 font-bold mb-2">Research Task: Finished vs. Unfinished Time</label>
                                <p className="text-xs text-slate-400 mb-2">Explain the difference based on your research:</p>
                                <textarea 
                                    name="timeResearch"
                                    value={notes.timeResearch}
                                    onChange={handleNoteChange}
                                    className="w-full bg-slate-950 border border-slate-700 rounded p-3 text-sm focus:border-amber-500 focus:ring-0 text-white"
                                    rows="3"
                                    placeholder="Type your findings here..."
                                ></textarea>
                            </div>
                          </div>
                        </div>
                      </div>
                    )}

                    {/* Phase 2: For vs Since */}
                    {activePhase === 2 && (
                      <div className="p-6 md:p-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                        <h2 className="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                          <Clock className="text-amber-500" />
                          Phase 2: "For" vs. "Since" Surveillance
                        </h2>

                        <p className="text-slate-300 mb-6">
                          The thieves leave clues about time. Research the rules and examples to decrypt the surveillance data.
                        </p>

                        <div className="space-y-6">
                            {/* FOR SECTION */}
                            <div className={`border rounded-lg overflow-hidden transition-all duration-500 ${phase2Status.for === 'unlocked' ? 'border-green-500 bg-green-900/10' : 'border-slate-700 bg-slate-900'}`}>
                                <div className="bg-slate-800 px-4 py-2 flex justify-between items-center">
                                    <h3 className="font-bold text-amber-400">MARKER: FOR</h3>
                                    {phase2Status.for === 'unlocked' ? <Unlock className="w-4 h-4 text-green-400"/> : <Lock className="w-4 h-4 text-slate-500"/>}
                                </div>
                                <div className="p-4 grid md:grid-cols-2 gap-4">
                                    <div>
                                        <label className="text-xs text-slate-400 uppercase font-bold mb-1 block">When do we use it?</label>
                                        {phase2Status.for === 'unlocked' ? (
                                            <div className="text-green-300 text-sm p-2 bg-green-900/20 rounded border border-green-500/30">
                                                A <span className="font-bold">period</span> of time (minutes, days, years).
                                            </div>
                                        ) : (
                                            <textarea 
                                                className="w-full bg-slate-950 border border-slate-700 rounded p-2 text-sm text-white focus:border-amber-500 focus:outline-none"
                                                placeholder="Research finding..."
                                                rows="2"
                                                value={phase2Data.forDef}
                                                onChange={(e) => setPhase2Data(prev => ({...prev, forDef: e.target.value}))}
                                            ></textarea>
                                        )}
                                    </div>
                                    <div>
                                        <label className="text-xs text-slate-400 uppercase font-bold mb-1 block">Heist Example</label>
                                        {phase2Status.for === 'unlocked' ? (
                                            <div className="text-green-300 text-sm p-2 bg-green-900/20 rounded border border-green-500/30 font-mono">
                                                "The thieves have been hiding <span className="border-b border-green-500">for two weeks</span>."
                                            </div>
                                        ) : (
                                            <textarea 
                                                className="w-full bg-slate-950 border border-slate-700 rounded p-2 text-sm text-white focus:border-amber-500 focus:outline-none"
                                                placeholder="Write an example using 'For'..."
                                                rows="2"
                                                value={phase2Data.forEx}
                                                onChange={(e) => setPhase2Data(prev => ({...prev, forEx: e.target.value}))}
                                            ></textarea>
                                        )}
                                    </div>
                                </div>
                                {phase2Status.for !== 'unlocked' && (
                                    <div className="px-4 pb-4 flex justify-between items-center">
                                        <button 
                                            onClick={() => validatePhase2('for')}
                                            className="bg-slate-700 hover:bg-amber-600 text-white px-4 py-1 rounded text-sm font-bold transition-colors"
                                        >
                                            VERIFY INTEL
                                        </button>
                                        {phase2Status.for === 'error' && <span className="text-red-400 text-xs flex items-center gap-1"><AlertTriangle className="w-3 h-3"/> Invalid. Need keywords like 'Period'/'Duration' and a valid example.</span>}
                                    </div>
                                )}
                            </div>

                            {/* SINCE SECTION */}
                            <div className={`border rounded-lg overflow-hidden transition-all duration-500 ${phase2Status.since === 'unlocked' ? 'border-green-500 bg-green-900/10' : 'border-slate-700 bg-slate-900'}`}>
                                <div className="bg-slate-800 px-4 py-2 flex justify-between items-center">
                                    <h3 className="font-bold text-amber-400">MARKER: SINCE</h3>
                                    {phase2Status.since === 'unlocked' ? <Unlock className="w-4 h-4 text-green-400"/> : <Lock className="w-4 h-4 text-slate-500"/>}
                                </div>
                                <div className="p-4 grid md:grid-cols-2 gap-4">
                                    <div>
                                        <label className="text-xs text-slate-400 uppercase font-bold mb-1 block">When do we use it?</label>
                                        {phase2Status.since === 'unlocked' ? (
                                            <div className="text-green-300 text-sm p-2 bg-green-900/20 rounded border border-green-500/30">
                                                A specific <span className="font-bold">point</span> in time (Monday, 2024).
                                            </div>
                                        ) : (
                                            <textarea 
                                                className="w-full bg-slate-950 border border-slate-700 rounded p-2 text-sm text-white focus:border-amber-500 focus:outline-none"
                                                placeholder="Research finding..."
                                                rows="2"
                                                value={phase2Data.sinceDef}
                                                onChange={(e) => setPhase2Data(prev => ({...prev, sinceDef: e.target.value}))}
                                            ></textarea>
                                        )}
                                    </div>
                                    <div>
                                        <label className="text-xs text-slate-400 uppercase font-bold mb-1 block">Heist Example</label>
                                        {phase2Status.since === 'unlocked' ? (
                                            <div className="text-green-300 text-sm p-2 bg-green-900/20 rounded border border-green-500/30 font-mono">
                                                "The painting has been missing <span className="border-b border-green-500">since last Tuesday</span>."
                                            </div>
                                        ) : (
                                            <textarea 
                                                className="w-full bg-slate-950 border border-slate-700 rounded p-2 text-sm text-white focus:border-amber-500 focus:outline-none"
                                                placeholder="Write an example using 'Since'..."
                                                rows="2"
                                                value={phase2Data.sinceEx}
                                                onChange={(e) => setPhase2Data(prev => ({...prev, sinceEx: e.target.value}))}
                                            ></textarea>
                                        )}
                                    </div>
                                </div>
                                {phase2Status.since !== 'unlocked' && (
                                    <div className="px-4 pb-4 flex justify-between items-center">
                                        <button 
                                            onClick={() => validatePhase2('since')}
                                            className="bg-slate-700 hover:bg-amber-600 text-white px-4 py-1 rounded text-sm font-bold transition-colors"
                                        >
                                            VERIFY INTEL
                                        </button>
                                        {phase2Status.since === 'error' && <span className="text-red-400 text-xs flex items-center gap-1"><AlertTriangle className="w-3 h-3"/> Invalid. Need keywords like 'Point'/'Start' and a valid example.</span>}
                                    </div>
                                )}
                            </div>
                        </div>

                        <div className="mt-8 bg-amber-900/20 border border-amber-900/50 p-4 rounded text-center">
                          <p className="text-amber-200 text-sm">
                            <span className="font-bold">DETECTIVE TIP:</span> If you can count it (1, 2, 3 hours), use <strong>FOR</strong>. If it's a name of a time (January, Yesterday), use <strong>SINCE</strong>.
                          </p>
                        </div>
                      </div>
                    )}

                    {/* Phase 3: Email Analysis */}
                    {activePhase === 3 && (
                      <div className="p-6 md:p-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                        <h2 className="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                          <Mail className="text-amber-500" />
                          Phase 3: Intercepted Intelligence
                        </h2>

                        <div className="bg-white text-slate-900 p-6 rounded shadow-lg mb-8 font-mono relative transform rotate-1">
                          <div className="absolute top-0 right-0 bg-red-600 text-white text-xs px-2 py-1 font-bold uppercase">Intercepted</div>
                          
                          <div className="border-b-2 border-slate-200 pb-4 mb-4">
                            <p><span className="font-bold">TO:</span> Anonymous_Collector@heist.net</p>
                            <p><span className="font-bold">FROM:</span> The_Art_Shadow</p>
                            <p><span className="font-bold">SUBJECT:</span> The Museum Situation</p>
                          </div>

                          <div className="space-y-2 leading-relaxed">
                            <p>Dear Partner,</p>
                            <p>
                              I have been watching the museum guards for three hours. I have noticed a weakness in the security at the back door. We have worked hard on this plan since January.
                            </p>
                            <p>
                              My team has been practicing with the laser equipment all night. They have already stolen the security codes!
                            </p>
                            <p>Be ready at midnight.</p>
                          </div>
                        </div>

                        {/* New Transcription Section */}
                        <div className="bg-slate-900 p-6 rounded border-l-4 border-amber-500 mb-8">
                            <h3 className="text-amber-400 font-bold mb-2 flex items-center gap-2">
                                <FileText className="w-4 h-4"/> Evidence Log
                            </h3>
                            <p className="text-sm text-slate-400 mb-3">
                                Identify the grammar examples (PPS and PPC) in the email above and transcribe them here:
                            </p>
                            <textarea 
                                name="transcribedEvidence"
                                value={notes.transcribedEvidence}
                                onChange={handleNoteChange}
                                className="w-full bg-slate-950 border border-slate-700 rounded p-3 text-sm focus:border-amber-500 focus:ring-0 text-white font-mono"
                                rows="4"
                                placeholder="Ex: I have been watching..."
                            ></textarea>
                        </div>

                        <div className="grid md:grid-cols-2 gap-6">
                          <div className="space-y-2">
                            <label className="text-sm font-medium text-amber-400">Analysis 1:</label>
                            <p className="text-xs text-slate-400">Why did the sender use PPC (have been watching) in the first sentence? (Finished or Unfinished?)</p>
                            <textarea 
                              name="p3_q1"
                              value={notes.p3_q1}
                              onChange={handleNoteChange}
                              className="w-full bg-slate-900 border border-slate-700 rounded p-3 text-sm focus:border-amber-500 focus:ring-0 text-white"
                              rows="3"
                              placeholder="Type your analysis here..."
                            ></textarea>
                          </div>
                          <div className="space-y-2">
                            <label className="text-sm font-medium text-amber-400">Analysis 2:</label>
                            <p className="text-xs text-slate-400">Why did they use PPS (have noticed) in the second sentence? (Result or Duration?)</p>
                            <textarea 
                              name="p3_q2"
                              value={notes.p3_q2}
                              onChange={handleNoteChange}
                              className="w-full bg-slate-900 border border-slate-700 rounded p-3 text-sm focus:border-amber-500 focus:ring-0 text-white"
                              rows="3"
                              placeholder="Type your analysis here..."
                            ></textarea>
                          </div>
                        </div>
                      </div>
                    )}

                    {/* Phase 4: Reports */}
                    {activePhase === 4 && (
                      <div className="p-6 md:p-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                        <h2 className="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                          <PenTool className="text-amber-500" />
                          Phase 4: Intelligence Reports
                        </h2>
                        <p className="text-slate-300 mb-6">
                          Prove you are ready for the mission. Write original intelligence reports based on the Botero Heist.
                        </p>

                        <div className="space-y-6">
                          <div className="bg-slate-900 p-4 rounded border border-slate-700">
                            <div className="flex justify-between mb-2">
                              <label className="text-sm font-bold text-blue-400">REPORT #1 (PPS)</label>
                              <span className="text-xs text-slate-500">Focus: Completed Result</span>
                            </div>
                            <input 
                              type="text"
                              name="report1"
                              value={notes.report1}
                              onChange={handleNoteChange}
                              placeholder="Ex: The thieves have stolen the keys."
                              className="w-full bg-transparent border-b border-slate-600 focus:border-blue-500 focus:outline-none py-2 text-slate-200"
                            />
                          </div>

                          <div className="bg-slate-900 p-4 rounded border border-slate-700">
                            <div className="flex justify-between mb-2">
                              <label className="text-sm font-bold text-purple-400">REPORT #2 (PPC)</label>
                              <span className="text-xs text-slate-500">Focus: Ongoing Action</span>
                            </div>
                            <input 
                              type="text"
                              name="report2"
                              value={notes.report2}
                              onChange={handleNoteChange}
                              placeholder="Ex: The police have been searching for clues."
                              className="w-full bg-transparent border-b border-slate-600 focus:border-purple-500 focus:outline-none py-2 text-slate-200"
                            />
                          </div>

                          <div className="bg-slate-900 p-4 rounded border border-slate-700">
                            <div className="flex justify-between mb-2">
                              <label className="text-sm font-bold text-green-400">REPORT #3 (MARKERS)</label>
                              <span className="text-xs text-slate-500">Use "For" or "Since"</span>
                            </div>
                            <input 
                              type="text"
                              name="report3"
                              value={notes.report3}
                              onChange={handleNoteChange}
                              placeholder="Ex: The guard has been asleep since midnight."
                              className="w-full bg-transparent border-b border-slate-600 focus:border-green-500 focus:outline-none py-2 text-slate-200"
                            />
                          </div>

                          <div className="flex justify-end">
                            <button className="flex items-center gap-2 bg-slate-700 hover:bg-slate-600 text-slate-200 px-4 py-2 rounded transition-colors text-sm">
                              <Save className="w-4 h-4" /> Save Drafts to Case File
                            </button>
                          </div>
                        </div>
                      </div>
                    )}

                    {/* Phase 5: AI Consultant */}
                    {activePhase === 5 && (
                      <div className="p-6 md:p-8 animate-in fade-in slide-in-from-bottom-4 duration-500">
                        <h2 className="text-2xl font-bold text-white mb-6 flex items-center gap-3">
                          <Bot className="text-amber-500" />
                          Phase 5: The Forensic Consultant
                        </h2>

                        <div className="bg-gradient-to-r from-indigo-900 to-slate-900 p-6 rounded-lg border border-indigo-500/30 mb-8">
                          <h3 className="text-indigo-300 font-bold mb-3 text-sm tracking-wider uppercase">Instruction Protocol</h3>
                          <p className="text-slate-300 text-sm mb-4">
                            Open your AI tool. Act as a detective presenting evidence. Copy this prompt to verify your grammar before the mission.
                          </p>
                          
                          <div className="bg-black/40 p-4 rounded border border-indigo-500/20 font-mono text-xs md:text-sm text-indigo-100 leading-relaxed relative group">
                            {aiPrompt}
                            <button 
                              onClick={() => copyToClipboard(aiPrompt)}
                              className="absolute top-2 right-2 p-2 bg-indigo-600 hover:bg-indigo-500 rounded text-white transition-all opacity-0 group-hover:opacity-100 focus:opacity-100"
                              title="Copy Prompt"
                            >
                              {copied ? <Check className="w-4 h-4" /> : <Copy className="w-4 h-4" />}
                            </button>
                          </div>
                          {copied && <p className="text-green-400 text-xs mt-2 text-right">Prompt copied to clipboard!</p>}
                        </div>

                        <div className="space-y-6 border-t border-slate-700 pt-6">
                          <h3 className="font-bold text-white">Record Your Findings</h3>
                          
                          <div>
                            <label className="block text-sm text-slate-400 mb-2">One question the AI asked that made you think:</label>
                            <input 
                              type="text"
                              name="aiQuestion"
                              value={notes.aiQuestion}
                              onChange={handleNoteChange}
                              className="w-full bg-slate-900 border border-slate-700 rounded p-3 text-sm focus:border-amber-500 focus:ring-0 text-white"
                            />
                          </div>

                          <div>
                            <label className="block text-sm text-slate-400 mb-2">Final "Verified Evidence" Statement:</label>
                            <textarea 
                              name="verifiedEvidence"
                              value={notes.verifiedEvidence}
                              onChange={handleNoteChange}
                              className="w-full bg-slate-900 border border-slate-700 rounded p-3 text-sm focus:border-amber-500 focus:ring-0 text-white"
                              rows="2"
                            ></textarea>
                          </div>
                        </div>
                      </div>
                    )}
                    
                  </div>
                  
                  <div className="flex justify-between mt-4">
                    <button 
                      onClick={() => setActivePhase(p => Math.max(1, p - 1))}
                      disabled={activePhase === 1}
                      className={`px-4 py-2 rounded text-sm font-medium ${activePhase === 1 ? 'opacity-0 cursor-default' : 'text-slate-400 hover:text-white'}`}
                    >
                      Previous Phase
                    </button>
                    <button 
                      onClick={() => setActivePhase(p => Math.min(5, p + 1))}
                      disabled={activePhase === 5}
                      className={`flex items-center gap-2 bg-amber-600 hover:bg-amber-500 text-white px-6 py-2 rounded font-bold text-sm transition-colors ${activePhase === 5 ? 'opacity-0 cursor-default' : ''}`}
                    >
                      Next Phase <ChevronRight className="w-4 h-4" />
                    </button>
                  </div>
                </div>
              </main>
            </div>
          );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<BoteroHeistBriefing />);
    </script>
</body>
</html>